<!DOCTYPE html>
<html lang="en">
<head>
  <base href="/ycrank/">
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YCRank</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script>
    tailwind.config = {
      theme: {
        screens: {
          'xs': '480px',
          'sm': '640px',
          'md': '768px',
          'lg': '1024px',
          'xl': '1280px',
          '2xl': '1536px',
        },
        extend: {
          fontFamily: {
            sans: ['Inter', 'Segoe UI', 'system-ui', '-apple-system', 'sans-serif'],
            mono: ['JetBrains Mono', 'Consolas', 'monospace'],
          },
          colors: {
            claude: {
              bg: 'var(--c-bg)',
              panel: 'var(--c-panel)',
              text: 'var(--c-text)',
              orange: 'var(--c-accent)',
              'orange-deep': 'var(--c-accent-deep)',
              blue: 'var(--c-blue)',
              green: 'var(--c-green)',
              gray: 'var(--c-gray)',
              dim: 'var(--c-dim)',
              border: 'var(--c-border)',
              cream: '#faf9f5',
              'cream-dark': '#f5f4ed',
              amber: 'var(--c-amber)',
              red: 'var(--c-red)',
              purple: 'var(--c-purple)',
              rose: 'var(--c-rose)',
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-claude-bg text-claude-text font-sans min-h-screen" x-data="app()" x-init="init()">

  <!-- Top Nav -->
  <nav class="bg-claude-bg border-b border-claude-border sticky top-0 z-50">
    <div class="max-w-[1600px] mx-auto px-3 py-2 flex items-center justify-between gap-2">
      <div class="flex items-center gap-2 sm:gap-3 min-w-0">
        <div class="nav-dots">
          <div class="nav-dot nav-dot-red"></div>
          <div class="nav-dot nav-dot-yellow"></div>
          <div class="nav-dot nav-dot-green"></div>
        </div>
        <h1 class="text-sm font-bold text-claude-orange cursor-pointer tracking-wider flex-shrink-0" @click="navigate('dashboard')">[YCRank]</h1>
        <span class="text-claude-border hidden sm:inline">|</span>
        <select x-model="currentBatch" @change="loadBatch(currentBatch)"
          class="bg-claude-bg border border-claude-border text-claude-orange px-1.5 sm:px-2 py-0.5 text-xs rounded-none focus:outline-none focus:border-claude-orange min-w-0">
          <template x-for="b in batches" :key="b">
            <option :value="b" x-text="formatBatch(b)"></option>
          </template>
        </select>
      </div>
      <div class="flex items-center gap-0 text-xs flex-shrink-0">
        <button @click="navigate('dashboard')"
          :class="view === 'dashboard' ? 'bg-claude-orange text-claude-bg px-1.5 sm:px-2 py-0.5' : 'text-claude-text hover:text-claude-orange px-1.5 sm:px-2 py-0.5'"
          class="transition-colors font-mono"><span class="sm:hidden">Dash</span><span class="hidden sm:inline">Dashboard</span></button>
        <span class="text-claude-border">|</span>
        <button @click="navigate('analytics')"
          :class="view === 'analytics' ? 'bg-claude-orange text-claude-bg px-1.5 sm:px-2 py-0.5' : 'text-claude-text hover:text-claude-orange px-1.5 sm:px-2 py-0.5'"
          class="transition-colors font-mono">Analytics</button>
        <template x-if="manifest && manifest.hasTraction">
          <span class="flex items-center">
            <span class="text-claude-border">|</span>
            <button @click="navigate('traction')"
              :class="view === 'traction' ? 'bg-claude-orange text-claude-bg px-1.5 sm:px-2 py-0.5' : 'text-claude-text hover:text-claude-orange px-1.5 sm:px-2 py-0.5'"
              class="transition-colors font-mono">Traction</button>
          </span>
        </template>
        <span class="text-claude-border hidden sm:inline">|</span>
        <span class="text-claude-gray px-1.5 sm:px-2 hidden sm:inline" x-show="manifest" x-text="manifest ? manifest.companyCount + ' companies' : ''"></span>
        <span class="text-claude-border">|</span>
        <a href="#" @click.prevent="logout()" class="text-claude-dim hover:text-claude-red px-1.5 sm:px-2 py-0.5 transition-colors font-mono">[logout]</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-[1600px] mx-auto px-2 sm:px-3 py-2 sm:py-3">

    <!-- Loading -->
    <div x-show="loading" class="text-center py-20 text-claude-orange terminal-blink">Loading_</div>

    <!-- Dashboard View -->
    <div x-show="view === 'dashboard' && !loading" x-cloak>
      <!-- Search -->
      <div class="flex flex-wrap items-center gap-2 mb-3">
        <span class="text-claude-dim text-xs font-mono">&gt;&gt;</span>
        <input type="text" x-model="search" placeholder="search..."
          class="bg-claude-bg border border-claude-border text-claude-text px-2 py-1 text-xs w-full sm:w-56 focus:outline-none focus:border-claude-orange rounded-none placeholder-claude-dim font-mono">
        <span class="text-claude-border hidden sm:inline">|</span>
        <span class="text-claude-dim text-xs" x-text="filteredTable.length + '/' + (manifest ? manifest.table.length : 0) + ' companies'"></span>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto">
        <table class="w-full text-xs border-collapse terminal-table">
          <thead>
            <tr class="border-b border-claude-border bg-claude-panel">
              <th class="px-1.5 py-1 text-left text-claude-gray cursor-pointer hover:text-claude-orange w-10 border border-claude-border whitespace-nowrap"
                @click="sortBy('rank')">#<span x-show="sortCol === 'rank'" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
              </th>
              <th class="px-1.5 py-1 text-left text-claude-gray cursor-pointer hover:text-claude-orange border border-claude-border whitespace-nowrap"
                @click="sortBy('name')">Company<span x-show="sortCol === 'name'" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
              </th>
              <template x-for="p in personas" :key="p.abbr">
                <th class="px-1.5 py-1 text-center text-claude-gray cursor-pointer hover:text-claude-orange w-10 border border-claude-border whitespace-nowrap"
                  @click="sortBy(p.abbr)"
                  :title="p.fullName"><span x-text="p.abbr"></span><span x-show="sortCol === p.abbr" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
                </th>
              </template>
              <th class="px-1.5 py-1 text-center text-claude-gray cursor-pointer hover:text-claude-orange w-12 border border-claude-border whitespace-nowrap"
                @click="sortBy('avg')">Avg<span x-show="sortCol === 'avg'" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
              </th>
              <th class="px-1.5 py-1 text-center text-claude-gray cursor-pointer hover:text-claude-orange w-14 border border-claude-border whitespace-nowrap"
                @click="sortBy('teamSize')">Team Size<span x-show="sortCol === 'teamSize'" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
              </th>
              <th class="px-1.5 py-1 text-center text-claude-gray cursor-pointer hover:text-claude-orange w-24 border border-claude-border whitespace-nowrap"
                @click="sortBy('revenue')">Annual Revenue<span x-show="sortCol === 'revenue'" x-text="sortDir === 1 ? '\u25B2' : '\u25BC'" class="text-[10px] ml-0.5"></span>
              </th>
            </tr>
          </thead>
          <tbody>
            <template x-for="row in filteredTable" :key="row.rank">
              <tr class="border-b border-claude-border hover:bg-claude-panel cursor-pointer transition-colors"
                @click="row.slug && navigate('company/' + row.slug)">
                <td class="px-1.5 py-1 text-claude-dim tabular-nums border border-claude-border" x-text="row.rank"></td>
                <td class="px-1.5 py-1 border border-claude-border">
                  <div class="flex items-center gap-1.5">
                    <span class="text-claude-text font-medium" x-text="row.name"></span>
                    <span x-show="isDisagreement(row.name)"
                      class="text-claude-red text-[10px]" title="High disagreement (stddev >= 20)">!!</span>
                  </div>
                  <div class="text-[10px] text-claude-dim truncate max-w-[150px] sm:max-w-xs md:max-w-md" x-text="row.oneLiner"></div>
                </td>
                <template x-for="p in personas" :key="p.abbr">
                  <td class="px-1.5 py-1 text-center tabular-nums border border-claude-border"
                    :class="tierColor(row.tiers[p.abbr])"
                    x-text="row.scores[p.abbr] != null ? row.scores[p.abbr] : '-'"></td>
                </template>
                <td class="px-1.5 py-1 text-center font-bold tabular-nums border border-claude-border"
                  :class="avgColor(row.avg)"
                  x-text="row.avg != null ? row.avg.toFixed(2) : '-'"></td>
                <td class="px-1.5 py-1 text-center tabular-nums text-claude-dim border border-claude-border"
                  x-text="row.teamSize != null ? row.teamSize : '-'"></td>
                <td class="px-1.5 py-1 text-center tabular-nums text-claude-dim border border-claude-border"
                  x-text="row.revenue != null ? row.revenue : '-'"></td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Company Detail View -->
    <div x-show="view === 'company' && !loading" x-cloak>
      <template x-if="companyData">
        <div>
          <!-- Back + Prev/Next -->
          <div class="flex items-center justify-between mb-3">
            <button @click="navigate('dashboard')" class="text-claude-text hover:text-claude-orange text-xs py-1">&lt;&lt; Dashboard</button>
            <div class="flex gap-3 sm:gap-2 text-xs">
              <button @click="prevCompany()" :disabled="!hasPrevCompany()"
                :class="hasPrevCompany() ? 'text-claude-text hover:text-claude-orange' : 'text-claude-dim cursor-not-allowed'"
                class="py-1">&lt;- Prev</button>
              <span class="text-claude-orange py-1" x-text="'#' + (companyData.consolidatedRank || '?')"></span>
              <button @click="nextCompany()" :disabled="!hasNextCompany()"
                :class="hasNextCompany() ? 'text-claude-text hover:text-claude-orange' : 'text-claude-dim cursor-not-allowed'"
                class="py-1">Next -&gt;</button>
            </div>
          </div>

          <!-- Header -->
          <div class="mb-4">
            <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2">
              <div class="min-w-0">
                <h2 class="text-lg font-bold text-claude-orange" x-text="companyData.name"></h2>
                <p class="text-claude-dim text-xs mt-0.5" x-text="companyData.oneLiner"></p>
              </div>
              <div class="flex-shrink-0 flex gap-2">
                <button @click="draftEmail()" x-show="!staticMode"
                  class="px-2 sm:px-3 py-1 border border-claude-blue text-claude-blue hover:bg-claude-blue hover:text-claude-bg text-xs transition-colors rounded-none flex items-center gap-1.5">
                  <span class="hidden sm:inline">Send Pre Demo Day Email</span>
                  <span class="sm:hidden">Email</span>
                </button>
                <button @click="openCouncil()" x-show="!staticMode"
                  class="px-2 sm:px-3 py-1 border border-claude-orange text-claude-orange hover:bg-claude-orange hover:text-claude-bg text-xs transition-colors rounded-none flex items-center gap-1.5">
                  <span>[council]</span>
                </button>
              </div>
            </div>
            <div class="flex flex-wrap gap-1.5 mt-2">
              <template x-if="companyData.metadata.website">
                <a :href="companyData.metadata.website" target="_blank" rel="noopener"
                  class="text-[10px] border border-claude-blue text-claude-blue px-1.5 py-0 rounded-none hover:bg-claude-blue hover:text-claude-bg" x-text="companyData.metadata.website"></a>
              </template>
              <template x-if="companyData.metadata.yc_partner && companyData.metadata.yc_partner !== 'Not listed'">
                <span class="text-[10px] border border-claude-purple text-claude-purple px-1.5 py-0 rounded-none" x-text="'YC Partner: ' + companyData.metadata.yc_partner"></span>
              </template>
            </div>
          </div>

          <!-- Score Summary -->
          <div class="mb-4 border border-claude-border">
            <div class="grid grid-cols-2 xs:grid-cols-4 md:grid-cols-8">
              <template x-for="p in personas" :key="p.slug">
                <div class="score-card border border-claude-border p-1.5 text-center"
                  :class="{ 'cursor-pointer': companyData.paths.evals[p.slug], 'score-card-active': activeTab === p.slug }"
                  @click="companyData.paths.evals[p.slug] && loadTabContent(p.slug)">
                  <div class="text-[10px] text-claude-dim" x-text="p.fullName"></div>
                  <div class="text-sm font-bold tabular-nums" :class="tierColor(companyData.evalScores[p.slug] ? companyData.evalScores[p.slug].tier : null)"
                    x-text="companyData.consolidatedScores[p.abbr] != null ? companyData.consolidatedScores[p.abbr] : '-'"></div>
                  <div class="text-[10px] text-claude-dim"
                    x-text="companyData.evalScores[p.slug] ? companyData.evalScores[p.slug].tier : ''"></div>
                </div>
              </template>
              <div class="score-card border border-claude-border p-1.5 text-center">
                <div class="text-[10px] text-claude-orange">Avg</div>
                <div class="text-sm font-bold tabular-nums" :class="avgColor(companyData.consolidatedAvg)"
                  x-text="companyData.consolidatedAvg != null ? companyData.consolidatedAvg.toFixed(2) : '-'"></div>
                <div class="text-[10px] text-claude-dim" x-text="companyData.consolidatedRank ? '#' + companyData.consolidatedRank : ''"></div>
              </div>
            </div>
          </div>

          <!-- Demo Day Slide -->
          <div class="mb-4">
            <h3 class="text-xs text-claude-gray mb-1 uppercase tracking-wider">--- Demo Day Slide ---</h3>
            <template x-if="companyData.slideImage">
              <div class="border border-claude-border overflow-hidden">
                <img :src="(staticMode ? '' : '../') + companyData.slideImage" :alt="companyData.name + ' demo day slide'"
                  class="w-full h-auto">
              </div>
            </template>
            <template x-if="!companyData.slideImage">
              <div class="border border-claude-border px-4 py-6 text-center text-claude-dim text-xs">
                Waiting for demo day slide
              </div>
            </template>
          </div>

          <!-- Tabbed Content: Memo + Evals -->
          <div class="mb-4">
            <div class="flex border-b border-claude-border overflow-x-auto">
              <button @click="loadTabContent('memo')"
                :class="activeTab === 'memo' ? 'bg-claude-orange text-claude-bg' : 'text-claude-text hover:text-claude-orange'"
                class="px-3 py-1 text-xs transition-colors rounded-none">Memo</button>
              <template x-for="p in personas" :key="p.slug">
                <button @click="loadTabContent(p.slug)"
                  x-show="companyData.paths.evals[p.slug]"
                  :class="activeTab === p.slug ? 'bg-claude-orange text-claude-bg' : 'text-claude-text hover:text-claude-orange'"
                  class="px-3 py-1 text-xs transition-colors rounded-none" x-text="p.abbr"></button>
              </template>
            </div>
            <div class="border border-t-0 border-claude-border p-2 sm:p-4">
              <div x-show="tabLoading" class="text-claude-orange text-xs terminal-blink">Loading_</div>
              <div x-show="!tabLoading" class="markdown-body" x-html="tabContent"></div>
            </div>
          </div>
        </div>
      </template>
    </div>

    <!-- Analytics View -->
    <div x-show="view === 'analytics' && !loading" x-cloak>
      <h2 class="text-lg font-bold mb-4 text-claude-orange">--- Analytics ---</h2>

      <!-- Disagreement Highlights -->
      <template x-if="manifest && manifest.disagreements.length > 0">
        <div class="mb-6">
          <h3 class="text-sm font-bold mb-1 text-claude-red">&gt;&gt; Disagreement Highlights</h3>
          <p class="text-claude-dim text-[10px] mb-2">Companies where personas diverge most (std dev >= 20).</p>
          <div class="overflow-x-auto">
          <table class="w-full text-xs border-collapse terminal-table">
            <thead>
              <tr class="border-b border-claude-border">
                <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Company</th>
                <th class="px-1.5 py-1 text-center text-claude-gray border border-claude-border">Avg</th>
                <th class="px-1.5 py-1 text-center text-claude-gray border border-claude-border">StdDev</th>
                <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">High</th>
                <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Low</th>
                <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Split</th>
              </tr>
            </thead>
            <tbody>
              <template x-for="d in manifest.disagreements" :key="d.company">
                <tr class="border-b border-claude-border">
                  <td class="px-1.5 py-1 text-claude-text font-medium border border-claude-border" x-text="d.company"></td>
                  <td class="px-1.5 py-1 text-center tabular-nums text-claude-orange border border-claude-border" x-text="d.avg.toFixed(2)"></td>
                  <td class="px-1.5 py-1 text-center tabular-nums text-claude-red border border-claude-border" x-text="d.stddev.toFixed(2)"></td>
                  <td class="px-1.5 py-1 text-claude-green border border-claude-border" x-text="d.high"></td>
                  <td class="px-1.5 py-1 text-claude-red border border-claude-border" x-text="d.low"></td>
                  <td class="px-1.5 py-1 text-claude-dim text-[10px] border border-claude-border" x-text="d.split"></td>
                </tr>
              </template>
            </tbody>
          </table>
          </div>
        </div>
      </template>

      <!-- Convergence Warnings -->
      <template x-if="manifest && manifest.convergenceWarnings.length > 0">
        <div class="mb-6">
          <h3 class="text-sm font-bold mb-1 text-claude-amber">&gt;&gt; Convergence Warnings</h3>
          <p class="text-claude-dim text-[10px] mb-2">Companies where all personas score within 10 points.</p>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-0">
            <template x-for="c in manifest.convergenceWarnings" :key="c.company">
              <div class="border border-claude-border px-2 py-1 text-xs">
                <span class="text-claude-text" x-text="c.company"></span>
                <span class="text-claude-dim ml-1" x-text="'(' + c.avg.toFixed(2) + ')'"></span>
              </div>
            </template>
          </div>
        </div>
      </template>

      <!-- Correlation Matrix -->
      <template x-if="manifest && manifest.correlationMatrix.length > 0">
        <div class="mb-6">
          <h3 class="text-sm font-bold mb-1 text-claude-blue">&gt;&gt; Persona Correlation Matrix</h3>
          <p class="text-claude-dim text-[10px] mb-2">Pearson r between persona score vectors. High correlation (r > 0.80) suggests insufficient differentiation.</p>
          <div class="overflow-x-auto">
            <table class="text-xs border-collapse terminal-table">
              <thead>
                <tr class="border-b border-claude-border">
                  <th class="px-2 py-1 border border-claude-border"></th>
                  <template x-for="p in personas" :key="'corr-h-'+p.abbr">
                    <th class="px-2 py-1 text-center text-claude-gray border border-claude-border" x-text="p.abbr"></th>
                  </template>
                </tr>
              </thead>
              <tbody>
                <template x-for="row in manifest.correlationMatrix" :key="row.persona">
                  <tr class="border-b border-claude-border">
                    <td class="px-2 py-1 font-bold text-claude-text border border-claude-border" x-text="row.persona"></td>
                    <template x-for="p in personas" :key="'corr-'+row.persona+'-'+p.abbr">
                      <td class="px-2 py-1 text-center tabular-nums border border-claude-border"
                        :class="corrColor(row.values[p.abbr])"
                        x-text="row.values[p.abbr] != null ? row.values[p.abbr].toFixed(2) : '--'"></td>
                    </template>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
        </div>
      </template>
    </div>

    <!-- Traction View -->
    <div x-show="view === 'traction' && !loading" x-cloak>
      <template x-if="tractionData">
        <div>
          <h2 class="text-lg font-bold mb-4 text-claude-orange">--- Traction Rankings ---</h2>
          <template x-for="tier in tractionData.tiers" :key="tier.tierName">
            <div class="mb-4">
              <h3 class="text-sm font-bold mb-1" :class="tractionTierColor(tier.tierName)"
                x-text="'>> ' + tier.tierName"></h3>
              <div class="overflow-x-auto">
              <table class="w-full text-xs border-collapse terminal-table">
                <thead>
                  <tr class="border-b border-claude-border">
                    <th class="px-1.5 py-1 text-left text-claude-gray w-8 border border-claude-border">#</th>
                    <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Company</th>
                    <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Key Metric</th>
                    <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Value</th>
                    <th class="px-1.5 py-1 text-left text-claude-gray border border-claude-border">Growth</th>
                  </tr>
                </thead>
                <tbody>
                  <template x-for="c in tier.companies" :key="c.company">
                    <tr class="border-b border-claude-border hover:bg-claude-panel cursor-pointer transition-colors"
                      @click="c.slug && navigate('company/' + c.slug)">
                      <td class="px-1.5 py-1 text-claude-dim tabular-nums border border-claude-border" x-text="c.rank || ''"></td>
                      <td class="px-1.5 py-1 text-claude-text font-medium border border-claude-border" x-text="c.company"></td>
                      <td class="px-1.5 py-1 text-claude-orange border border-claude-border" x-text="c.keyMetric"></td>
                      <td class="px-1.5 py-1 text-claude-orange border border-claude-border" x-text="c.value"></td>
                      <td class="px-1.5 py-1 text-claude-dim border border-claude-border" x-text="c.growth"></td>
                    </tr>
                  </template>
                </tbody>
              </table>
              </div>
            </div>
          </template>
        </div>
      </template>
    </div>

  </main>

  <!-- Council Slide-out Panel -->
  <div x-show="councilOpen && !staticMode" x-cloak
    class="fixed inset-y-0 right-0 z-50 flex"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="translate-x-full"
    x-transition:enter-end="translate-x-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="translate-x-0"
    x-transition:leave-end="translate-x-full">

    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black/50" @click="councilOpen = false"></div>

    <!-- Panel -->
    <div class="relative w-full sm:w-[520px] sm:max-w-full bg-claude-bg border-l-2 border-claude-orange flex flex-col h-full">
      <!-- Panel Header -->
      <div class="flex items-center justify-between px-3 py-2 border-b border-claude-border flex-shrink-0">
        <div>
          <h3 class="font-bold text-claude-orange text-sm">[Investor Council]</h3>
          <p class="text-[10px] text-claude-dim" x-text="companyData ? companyData.name : 'No company loaded'"></p>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-[10px] text-claude-dim" x-text="'$' + councilCost.toFixed(3)"></span>
          <button @click="councilOpen = false" class="text-claude-gray hover:text-claude-red text-xs px-1">[x]</button>
        </div>
      </div>

      <!-- Persona Toggles + Model Selector -->
      <div class="px-3 py-1.5 border-b border-claude-border flex-shrink-0">
        <div class="flex flex-wrap gap-1 mb-1.5">
          <button @click="selectAllCouncilPersonas()"
            :class="councilPersonas.size === personas.length
              ? 'bg-claude-orange text-claude-bg border-claude-orange'
              : 'text-claude-text border-claude-border hover:border-claude-orange'"
            class="px-1.5 py-0 text-[10px] border transition-colors rounded-none">All</button>
          <template x-for="p in personas" :key="p.slug">
            <button @click="toggleCouncilPersona(p.slug)"
              :class="councilPersonas.has(p.slug)
                ? 'bg-claude-orange text-claude-bg border-claude-orange'
                : 'text-claude-dim border-claude-border hover:text-claude-text hover:border-claude-orange'"
              class="px-1.5 py-0 text-[10px] border transition-colors rounded-none" x-text="p.abbr"></button>
          </template>
        </div>
        <div class="flex items-center gap-2">
          <select x-model="councilModel" class="bg-claude-bg border border-claude-border text-claude-orange px-1.5 py-0 text-[10px] rounded-none focus:outline-none">
            <option value="sonnet">Sonnet</option>
            <option value="opus">Opus</option>
            <option value="haiku">Haiku</option>
          </select>
          <button @click="clearCouncilHistory()" class="text-[10px] text-claude-dim hover:text-claude-red transition-colors">[clear]</button>
        </div>
      </div>

      <!-- Chat Messages -->
      <div class="flex-1 overflow-y-auto px-3 py-2 space-y-3" x-ref="councilMessages">
        <template x-if="councilMessages.length === 0">
          <div class="text-center text-claude-dim text-xs mt-10">
            Ask a question to get opinions from the investor council.
          </div>
        </template>
        <template x-for="(msg, i) in councilMessages" :key="i">
          <div>
            <!-- User question -->
            <template x-if="msg.type === 'question'">
              <div class="mb-2">
                <div class="text-xs text-claude-text">
                  <span class="text-claude-orange">&gt; </span><span x-text="msg.text"></span>
                </div>
              </div>
            </template>
            <!-- Persona response -->
            <template x-if="msg.type === 'response'">
              <div class="mb-2">
                <div class="flex items-center gap-2 mb-0.5">
                  <span class="text-[10px] font-bold" :class="personaColor(msg.persona)" x-text="msg.fullName + ' (' + msg.abbr + ')'"></span>
                  <span class="text-[10px] text-claude-dim" x-text="msg.cost && msg.elapsed ? msg.cost + ', ' + msg.elapsed : ''"></span>
                </div>
                <div class="border-l-2 border-claude-border pl-2 ml-1">
                  <template x-if="msg.loading">
                    <div class="text-xs text-claude-dim terminal-blink">processing_</div>
                  </template>
                  <template x-if="!msg.loading">
                    <p class="text-xs text-claude-text whitespace-pre-wrap" x-text="msg.text"></p>
                  </template>
                </div>
              </div>
            </template>
          </div>
        </template>
      </div>

      <!-- Input Area -->
      <div class="px-3 py-2 border-t border-claude-border flex-shrink-0">
        <div class="flex gap-1.5">
          <span class="text-claude-orange text-xs py-1">&gt;</span>
          <input type="text" x-model="councilInput"
            @keydown.enter="askCouncil()"
            :disabled="councilAsking"
            placeholder="ask the council..."
            class="flex-1 bg-claude-bg border border-claude-border text-claude-text px-2 py-1 text-xs focus:outline-none focus:border-claude-orange disabled:opacity-50 rounded-none placeholder-claude-dim">
          <button @click="askCouncil()" :disabled="councilAsking || !councilInput.trim()"
            :class="councilAsking || !councilInput.trim() ? 'text-claude-dim border-claude-border cursor-not-allowed' : 'text-claude-orange border-claude-orange hover:bg-claude-orange hover:text-claude-bg'"
            class="px-3 py-1 border text-xs transition-colors rounded-none">
            <span x-show="!councilAsking">[send]</span>
            <span x-show="councilAsking" class="terminal-blink">...</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Footer -->
  <div class="status-footer">
    <span>v2.0</span>
    <span style="color:var(--c-border)">|</span>
    <span class="sf-dot"></span>
    <span>systems online</span>
  </div>

  <script src="app.js"></script>
</body>
</html>
